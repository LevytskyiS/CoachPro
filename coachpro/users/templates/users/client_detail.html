{% extends 'users/base.html' %}
{% load static %}

{% block content %}
    {% if request.user.is_authenticated %}

            Client's profile<br/>
            {{ user.first_name }} {{ user.last_name }}<br/><br/>
            Trainer:<br/>
            <a href="{{ user.profile.get_trainer.profile.get_absolute_url_trainer }}">{{ user.profile.get_trainer.first_name }} {{ user.profile.get_trainer.last_name }}</a><br/><br/>

            {% if request.user.profile.is_coach and request.user.id == user.profile.get_trainer.id %}
                <a href="{{ user.training_pages.get_absolute_url }}">Client's training plan</a><br/><br/>
            {% endif %}

            BASIC DATA:<br/><br/>
            Age: {{ user.profile.age }}<br/>
            Weight: {{ user.profile.weight }}<br/>
            Height: {{ user.profile.height }}<br/>
            Lifestyle: {{ user.profile.lifestyle }}<br/>
            Blood Pressure: {{ user.profile.blood_pressure }}<br/>
            Chronic Illness: {{ user.profile.chronic_illness }}<br/>
            Spine: {{ user.profile.spine }}<br/>
            Schedule: {{ user.profile.schedule }}<br/>
            Steps: {{ user.profile.steps }}<br/>
            Muscles to work on: {{ user.profile.muscles }}<br/>
            Unfav Food: {{ user.profile.unfavourite_food }}<br/>
            Allergies: {{ user.profile.food_allergies }}<br/>
            Fav Food: {{ user.profile.favourite_food }}<br/>
            Test results: {{ user.profile.test_results }}<br/><br/>

            <a href="{% url 'users:profile_update' pk=user.profile.id %}">Edit Profile</a><br/><br/>

            REPORTS:<br/><br/>
            {% for report in user.reports.all %}
                Weight: {{ report.weight }}<br/>
                Sleep Quality: {{ report.sleep_quality }}<br/>
                Mood: {{ report.mood }}<br/>
                Date: {{ report.date }}<br/><br/>
                    <a href="{% url 'progress:update_report' pk=report.id %}">Edit</a><br/>
                    <a href="{% url 'progress:delete_report' pk=report.id %}">Delete</a><br/>
                <hr>
            {% endfor %}
            
            {% if not request.user.is_superuser %}
                Add new report<br/><br/>
                <form action="{% url 'progress:create_report' %}" method="post">
                    {% csrf_token %}
                    {{ form }}
                    <input type="submit" value="Submit">
                </form>
                <br/><br/>
            {% endif %}

            {% if not user.photo.all %}
                No photos uploaded yet! Click the button below to add a photo of yourself.<br/>
            {% else %}
                {% for photo in user.photo.all %}
                    <img src="{{ photo.image.url }}" alt="" width="100" height="100"><br/>
                    <a href="{{ photo.image.url }}">Image</a><br/>
                    <a href="{% url 'progress:delete_photo' pk=photo.id %}">Delete</a><br/>
                {% endfor %}
            {% endif %}

            {% if not request.user.is_superuser %}
                <form action="{% url 'progress:upload_photo' %}" enctype="multipart/form-data" method="post">
                    {% csrf_token %}
                    {{ upload_photo_form.as_p }}
                    <input type="submit" value="Submit">
                </form>
                <br/><br/>
            {% endif %}

            {% if not user.file.all %}
            No files uploaded yet. Click the button below to add a file.<br/><br/>
            {% else %}
            <p>My files</p>
            {% for file in user.file.all %}
                <a href="{{ file.file.url }}">File</a><br/>
                <a href="{% url 'progress:delete_file' pk=file.id %}">Delete</a><br/>
            {% endfor %}
            {% endif %}

            {% if not request.user.is_superuser %}
                <form action="{% url 'progress:upload_file' %}" enctype="multipart/form-data" method="post">
                    {% csrf_token %}
                    {{ upload_file_form }}
                    <input type="submit" value="Submit">
                </form>
                <br/><br/>
            {% endif %}

    {% endif %}
{% endblock %}